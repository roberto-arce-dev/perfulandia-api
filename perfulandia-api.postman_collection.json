{
  "info": {
    "name": "Perfulandia API",
    "description": "Colección actualizada de Postman para Perfulandia API",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "auth": {
    "type": "bearer",
    "bearer": [
      {
        "key": "token",
        "value": "{{token}}",
        "type": "string"
      }
    ]
  },
  "item": [
    {
      "name": "Auth",
      "item": [
        {
          "name": "Register",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/auth/register",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "auth",
                "register"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"cliente@example.com\",\n  \"password\": \"Password123\",\n  \"role\": \"CLIENTE\",\n  \"nombre\": \"Cliente Demo\",\n  \"telefono\": \"+51 900000000\",\n  \"direccion\": \"Av. Principal 123\",\n  \"preferencias\": [\n    \"cítrico\",\n    \"madera\"\n  ]\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "auth": {
              "type": "noauth"
            }
          },
          "response": []
        },
        {
          "name": "Login",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/auth/login",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "auth",
                "login"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"cliente@example.com\",\n  \"password\": \"Password123\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "auth": {
              "type": "noauth"
            }
          },
          "response": []
        },
        {
          "name": "Get My Profile",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/auth/profile",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "auth",
                "profile"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Get All Users (Admin)",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/auth/users",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "auth",
                "users"
              ]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Upload",
      "item": [
        {
          "name": "Upload Image",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/upload/image",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "upload",
                "image"
              ]
            },
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "file",
                  "type": "file",
                  "src": "",
                  "description": "Imagen a subir (JPG, PNG, etc.) - Máximo 5MB"
                }
              ]
            },
            "auth": {
              "type": "noauth"
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "ClienteProfile (Profiles)",
      "item": [
        {
          "name": "Get My Profile",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/cliente-profile/me",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "cliente-profile",
                "me"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Update My Profile",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/cliente-profile/me",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "cliente-profile",
                "me"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"nombre\": \"Cliente Demo\",\n  \"telefono\": \"+51 911111111\",\n  \"direccion\": \"Calle Falsa 123\",\n  \"preferencias\": [\n    \"cítrico\",\n    \"madera\"\n  ]\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "response": []
        },
        {
          "name": "List All Profiles (Admin)",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/cliente-profile",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "cliente-profile"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Get Profile by UserId (Admin)",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/cliente-profile/{{userId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "cliente-profile",
                "{{userId}}"
              ]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Categoria",
      "item": [
        {
          "name": "Crear Categoria",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/categoria",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "categoria"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"nombre\": \"Cítricos\",\n  \"tipo\": \"fragancia\",\n  \"descripcion\": \"Aromas frescos y brillantes\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "response": []
        },
        {
          "name": "Listar Categorias",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/categoria",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "categoria"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Obtener Categoria por ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/categoria/{{categoriaId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "categoria",
                "{{categoriaId}}"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Actualizar Categoria",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/categoria/{{categoriaId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "categoria",
                "{{categoriaId}}"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"descripcion\": \"Actualización de descripción\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "response": []
        },
        {
          "name": "Eliminar Categoria",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/categoria/{{categoriaId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "categoria",
                "{{categoriaId}}"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Upload Categoria Image",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/categoria/{{categoriaId}}/upload-image",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "categoria",
                "{{categoriaId}}",
                "upload-image"
              ]
            },
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "file",
                  "type": "file",
                  "src": "",
                  "description": "Imagen de la categoría"
                }
              ]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Perfume",
      "item": [
        {
          "name": "Crear Perfume",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/perfume",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "perfume"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"nombre\": \"Light Blue\",\n  \"marca\": \"Dolce & Gabbana\",\n  \"fragancia\": \"Cítrica\",\n  \"tamaño\": 100,\n  \"genero\": \"unisex\",\n  \"precio\": 95.5,\n  \"stock\": 30,\n  \"categoria\": \"{{categoriaId}}\",\n  \"descripcion\": \"Aroma fresco perfecto para el verano.\",\n  \"imagen\": \"https://example.com/perfumes/light-blue.jpg\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "response": []
        },
        {
          "name": "Listar Perfumes",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/perfume",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "perfume"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Perfumes por Categoría",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/perfume/categoria/{{categoriaId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "perfume",
                "categoria",
                "{{categoriaId}}"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Filtrar Perfumes",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/perfume/filtros",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "perfume",
                "filtros"
              ],
              "query": [
                {
                  "key": "genero",
                  "value": "hombre"
                },
                {
                  "key": "fragancia",
                  "value": "cítrica"
                },
                {
                  "key": "tamaño",
                  "value": "100"
                },
                {
                  "key": "precioMin",
                  "value": "50"
                },
                {
                  "key": "precioMax",
                  "value": "150"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Obtener Perfume por ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/perfume/{{perfumeId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "perfume",
                "{{perfumeId}}"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Actualizar Perfume",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/perfume/{{perfumeId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "perfume",
                "{{perfumeId}}"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"precio\": 105.0,\n  \"stock\": 20\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "response": []
        },
        {
          "name": "Eliminar Perfume",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/perfume/{{perfumeId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "perfume",
                "{{perfumeId}}"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Upload Perfume Image",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/perfume/{{perfumeId}}/upload-image",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "perfume",
                "{{perfumeId}}",
                "upload-image"
              ]
            },
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "file",
                  "type": "file",
                  "src": "",
                  "description": "Imagen del perfume"
                }
              ]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Cliente",
      "item": [
        {
          "name": "Crear Cliente",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/cliente",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "cliente"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"nombre\": \"Juan Pérez\",\n  \"email\": \"cliente@correo.com\",\n  \"telefono\": \"+51 977777777\",\n  \"direccion\": \"Av. Siempre Viva 742\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "response": []
        },
        {
          "name": "Listar Clientes",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/cliente",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "cliente"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Obtener Cliente por ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/cliente/{{clienteId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "cliente",
                "{{clienteId}}"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Actualizar Cliente",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/cliente/{{clienteId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "cliente",
                "{{clienteId}}"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"telefono\": \"+51 988888888\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "response": []
        },
        {
          "name": "Eliminar Cliente",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/cliente/{{clienteId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "cliente",
                "{{clienteId}}"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Upload Cliente Image",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/cliente/{{clienteId}}/upload-image",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "cliente",
                "{{clienteId}}",
                "upload-image"
              ]
            },
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "file",
                  "type": "file",
                  "src": "",
                  "description": "Imagen del cliente"
                }
              ]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Pedido",
      "item": [
        {
          "name": "Crear Pedido",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/pedido",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "pedido"
              ]
            },
            "description": "Si no se envía cliente, se usará el profile asociado al token",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"items\": [\n    {\n      \"perfume\": \"{{perfumeId}}\",\n      \"cantidad\": 1,\n      \"precio\": 95.5\n    }\n  ],\n  \"total\": 95.5\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "response": []
        },
        {
          "name": "Listar Pedidos",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/pedido",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "pedido"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Obtener Pedido por ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/pedido/{{pedidoId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "pedido",
                "{{pedidoId}}"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Actualizar Pedido",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/pedido/{{pedidoId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "pedido",
                "{{pedidoId}}"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"estado\": \"enviado\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "response": []
        },
        {
          "name": "Eliminar Pedido",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/pedido/{{pedidoId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "pedido",
                "{{pedidoId}}"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Upload Pedido Image",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/pedido/{{pedidoId}}/upload-image",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "pedido",
                "{{pedidoId}}",
                "upload-image"
              ]
            },
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "file",
                  "type": "file",
                  "src": "",
                  "description": "Comprobante o imagen del pedido"
                }
              ]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Reseña",
      "item": [
        {
          "name": "Crear Reseña",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/resena",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "resena"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"perfume\": \"{{perfumeId}}\",\n  \"cliente\": \"{{clienteId}}\",\n  \"puntuacion\": 5,\n  \"comentario\": \"Excelente fijación y proyección\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "response": []
        },
        {
          "name": "Listar Reseñas",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/resena",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "resena"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Réseñas por Perfume",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/resena/perfume/{{perfumeId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "resena",
                "perfume",
                "{{perfumeId}}"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Réseñas por Cliente",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/resena/cliente/{{clienteId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "resena",
                "cliente",
                "{{clienteId}}"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Obtener Reseña por ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/resena/{{resenaId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "resena",
                "{{resenaId}}"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Actualizar Reseña",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/resena/{{resenaId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "resena",
                "{{resenaId}}"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"puntuacion\": 4,\n  \"comentario\": \"Buen aroma pero poca duración\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            }
          },
          "response": []
        },
        {
          "name": "Eliminar Reseña",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/resena/{{resenaId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "resena",
                "{{resenaId}}"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Upload Reseña Image",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/resena/{{resenaId}}/upload-image",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "resena",
                "{{resenaId}}",
                "upload-image"
              ]
            },
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "file",
                  "type": "file",
                  "src": "",
                  "description": "Imagen asociada a la reseña"
                }
              ]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Servir Imágenes",
      "item": [
        {
          "name": "Get Image",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseStaticUrl}}/uploads/{{filename}}",
              "host": [
                "{{baseStaticUrl}}"
              ],
              "path": [
                "uploads",
                "{{filename}}"
              ]
            },
            "auth": {
              "type": "noauth"
            }
          },
          "response": []
        },
        {
          "name": "Get Thumbnail",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseStaticUrl}}/uploads/thumbnails/{{filename}}",
              "host": [
                "{{baseStaticUrl}}"
              ],
              "path": [
                "uploads",
                "thumbnails",
                "{{filename}}"
              ]
            },
            "auth": {
              "type": "noauth"
            }
          },
          "response": []
        }
      ]
    }
  ],
  "variable": [
    {
      "key": "baseUrl",
      "value": "http://localhost:3003/api",
      "type": "string"
    },
    {
      "key": "baseStaticUrl",
      "value": "http://localhost:3003",
      "type": "string"
    },
    {
      "key": "token",
      "value": "",
      "type": "string"
    },
    {
      "key": "userId",
      "value": "",
      "type": "string"
    },
    {
      "key": "categoriaId",
      "value": "",
      "type": "string"
    },
    {
      "key": "perfumeId",
      "value": "",
      "type": "string"
    },
    {
      "key": "clienteId",
      "value": "",
      "type": "string"
    },
    {
      "key": "pedidoId",
      "value": "",
      "type": "string"
    },
    {
      "key": "resenaId",
      "value": "",
      "type": "string"
    },
    {
      "key": "filename",
      "value": "",
      "type": "string"
    }
  ]
}